<% content_for :title, "Races" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Races</h1>
    <%= link_to "New race", new_race_path, data: { turbo_stream: true }, class: "rounded-md px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
  </div>

  <% if @races.any? %>
    <div class="mt-8 flex flex-col gap-8">
      <% if @races.live.any? %>
        <div>
          <div class="flex items-center gap-2 mb-4">
            <div class="w-3 h-3 text-lime-400">
              <%= render "icons/circle" %>
            </div>
            <h2 class="font-semibold text-3xl">LIVE NOW</h2>
          </div>
          <div id="live-races" class="min-w-full grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4">
            <% @races.live.each do |race| %>
              <%= render race %>
            <% end %>
          </div>
        </div>
      <% end %>
      <% if @races.completed.any? %>
        <div>
          <div class="flex items-center gap-2 mb-4">
            <div class="w-3 h-3 text-blue-500">
              <%= render "icons/check" %>
            </div>
            <h2 class="font-semibold text-3xl">COMPLETED</h2>
          </div>
          <div id="completed-races" class="min-w-full grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4">
            <% @races.completed.each do |race| %>
              <%= render race %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center my-10 col-span-full mt-8">No races found.</p>
  <% end %>
</div>
