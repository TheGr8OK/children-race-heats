<div data-controller="race-memberships">
  <div class="flex items-center justify-between mt-8 mb-2">
    <%= form.label "Admit students to the race", class: "block text-sm font-medium text-gray-700" %>
    <button type="button" class="flex items-center text-blue-500 hover:text-blue-400 border border-blue-500 hover:border-blue-400 rounded-md px-4 py-2" data-action="click->race-memberships#addStudent" data-race-memberships-target="addButton">
      <div class="-ml-1 mr-1.5">
        <div class="w-3">
          <%= render "icons/plus" %>
        </div>
      </div>
      <div class="text-sm">Add student</div>
    </button>
  </div>

  <div data-race-memberships-target="studentFields" data-race-memberships-counter-value="0">
    <% if form.object.race.race_memberships.any? %>
      <% form.object.race.race_memberships.each_with_index do |race_membership, index| %>
        <%= render "membership_form_field", form:, race_membership:, counter: index %>
      <% end %>
    <% else %>
      <%= render "membership_form_field", form:, counter: 0 %>
    <% end %>
    
    <template data-race-memberships-target="template">
      <%= render "membership_form_field", form: %>
    </template>
  </div>

</div>
